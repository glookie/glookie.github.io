<html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/1.6.9/topojson.min.js"></script>
<script src="datamaps.all.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<div id="container" style="position: relative; width: 800px; height: 800px;"></div>
<!--<script>
    var map = new Datamap({element: document.getElementById('container')});
</script>-->
<script>
var USdata = {};
var options = {
	element: document.getElementById('container'),
	scope: 'usa',	
	geographyConfig: {
		
		highlightBorderColor: '#bada55',
		popupTemplate: function(geography, data) {
		  return '<div class="hoverinfo">' + geography.properties.name + ' has Number of Things:' +  data.numberOfThings + ' '		  
		},
		highlightBorderWidth: 3
	},
	fills: {
		HIGH: '#afafaf',
		LOW: '#123456',
		MEDIUM: 'blue',
		UNKNOWN: 'rgb(0,0,0)',
		defaultFill: '#EDDC4E'
	}
	
};

    $( document ).ready(function() {
		console.log( "ready!" );
		
		this.USdata = {
        'AK': 'Alaska',
        'AL': '123',
        'AR': '7576',
        'AZ': '345',
        'CA': '453',
        'CO': '453',
        'CT': '765',
        'DC': '234',
        'DE': '35434',
        //'FL': 'Florida', Simulate a missing value defaults to 2 letter abbr
        'GA': '',
        'HI': '234',
        'IA': '234',
        'ID': 'Idaho',
        'IL': '234',
        'IN': '234',
        'KS': '234',
        'KY': '234',
        'LA': '234',
        'MA': '234',
        'MD': '7566',
        'ME': '567',
        'MI': '567',
        'MN': '46',
        'MO': '456',
        'MS': '567',
        'MT': '345',
        'NC': '456',
        'ND': '345',
        'NE': '65',
        'NH': '356',
        'NJ': '54',
        'NM': '4356',
        'NV': '5463',
        'NY': '3456',
        'OH': '2345',
        'OK': '2345',
        'OR': '564',
        'PA': '456',
        'RI': '234',
        'SC': '234',
        'SD': '5467',
        'TN': '5467',
        'TX': '2345',
        'UT': '345',
        'VA': '432',
        'VT': '654',
        'WA': '456',
        'WI': '543',
        'WV': '345',
        'WY': '1234'}; 
		console.log(this.USdata);		
		
	});
   
	var map = new Datamap(options);
	map.updateChoropleth({
		TX: {
			fillKey: 'LOW',
			numberOfThings: 2002
		},
		AZ: {
			fillKey: 'defaultFill',
			numberOfThings: 2002
		},
		CO: {
			fillKey: 'MEDIUM',
			numberOfThings: 10381
		}
	});
	
    // Draw a legend for this map
    map.legend();
	//map.labels({labelColor: 'blue', fontSize: 12});
	map.labels({'customLabelText': USdata});


	
</script>
</html>